<!DOCTYPE html>
<html lang="en">
<!-- begin::Head -->

<head>
   <base href="../">
   <meta charset="utf-8" />
   <title>Pariwisata | Asset</title>
   <meta name="description" content="Latest updates and statistic charts">
   <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
   <!--begin::Fonts -->
   <link rel="stylesheet"
      href="https://fonts.googleapis.com/css?family=Poppins:300,400,500,600,700|Roboto:300,400,500,600,700">
   <!--end::Fonts -->
   <!--begin::Page Vendors Styles(used by this page) -->
   <!--end::Page Vendors Styles -->
   <!--begin::Global Theme Styles(used by all pages) -->
   <link href="assets/plugins/global/plugins.bundle.css" rel="stylesheet" type="text/css" />
   <link href="assets/css/style.bundle.css" rel="stylesheet" type="text/css" />
   <link href="assets/plugins/custom/datatables/datatables.bundle.css" rel="stylesheet" type="text/css">
   <!--end::Global Theme Styles -->
   <!--begin::Layout Skins(used by all pages) -->
   <!--end::Layout Skins -->
   <link rel="shortcut icon" href="assets/media/logos/favicon.ico" />
   <link rel="stylesheet" href="assets/css/style.css">
   <style>
      th {
         text-align: center;
      }

      #tableRekapWrap th {
         background-color: #f4f4f4;
      }

      #googleMap {
         border-radius: 10px;
      }
   </style>
</head>
<!-- end::Head -->
<!-- begin::Body -->

<body
   class="kt-quick-panel--right kt-demo-panel--right kt-offcanvas-panel--right kt-header--fixed kt-header-mobile--fixed kt-subheader--fixed kt-subheader--enabled kt-subheader--solid kt-aside--enabled kt-aside--fixed kt-page--loading">
   <!-- begin:: Page -->
   <!-- begin:: Header Mobile -->
   <div id="kt_header_mobile" class="kt-header-mobile  kt-header-mobile--fixed ">
      <div class="kt-header-mobile__logo">
         <a href="sisfor_aset/index.html">
            <img width="40px" alt="Logo" src="assets/media/logos/logo_sulsel.svg" />
         </a>
      </div>
      <div class="kt-header-mobile__toolbar">
         <button class="kt-header-mobile__toolbar-toggler kt-header-mobile__toolbar-toggler--left"
            id="kt_aside_mobile_toggler"><span></span></button>
         <button class="kt-header-mobile__toolbar-toggler" id="kt_header_mobile_toggler"><span></span></button>
         <button class="kt-header-mobile__toolbar-topbar-toggler" id="kt_header_mobile_topbar_toggler"><i
               class="flaticon-more"></i></button>
         <button class="btn btn-logut">
            <span class="fa fa-sign-out-alt"></span>
         </button>
      </div>
   </div>
   <!-- end:: Header Mobile -->
   <div class="kt-grid kt-grid--hor kt-grid--root">
      <div class="kt-grid__item kt-grid__item--fluid kt-grid kt-grid--ver kt-page">
         <!-- begin:: Aside -->
         <button class="kt-aside-close " id="kt_aside_close_btn"><i class="la la-close"></i></button>
         <div class="kt-aside  kt-aside--fixed  kt-grid__item kt-grid kt-grid--desktop kt-grid--hor-desktop"
            id="kt_aside">
            <!-- begin:: Aside -->
            <div class="kt-aside__brand kt-grid__item  " id="kt_aside_brand">
               <div class="kt-aside__brand-logo">
                  <a href="sisfor_aset/index.html">
                     <img width="80px" alt="Logo" src="assets/media/logos/logo_sulsel.svg" />
                  </a>
               </div>
            </div>
            <!-- end:: Aside -->
            <!-- begin:: Aside Menu -->
            <div class="kt-aside-menu-wrapper kt-grid__item kt-grid__item--fluid" id="kt_aside_menu_wrapper">
               <div id="kt_aside_menu" class="kt-aside-menu  kt-aside-menu--dropdown " data-ktmenu-vertical="1"
                  data-ktmenu-dropdown="1" data-ktmenu-scroll="0">
                  <ul class="kt-menu__nav ">
                     <li class="kt-menu__item  " aria-haspopup="true">
                        <a href="sisfor_aset/index.html" class="kt-menu__link ">
                           <!-- <object type="image/svg+xml" data="assets/media/misc/asset.svg" class="kt-menu__link-icon icon icon-aset" width="50%"></object> -->
                           <span class="kt-menu__link-icon icon icon-aset"><i class="fa fa-columns"></i></span>
                           <span class="kt-menu__link-text text-center">Sistem Informasi Aset</span>
                        </a>
                     </li>
                     <li class="kt-menu__item  " aria-haspopup="true">
                        <a href="sisfor_aset/rekap_mutasi.html" class="kt-menu__link ">
                           <!-- 	<object type="image/svg+xml" data="assets/media/misc/move.svg" class="kt-menu__link-icon icon icon-speed" width="50%"></object> -->
                           <span class="kt-menu__link-icon icon icon-aset"><i class="fa fa-copy"></i></span>
                           <span class="kt-menu__link-text text-center">Rekap Mutasi</span>
                        </a>
                     </li>
                     <li class="kt-menu__item  " aria-haspopup="true">
                        <a href="sisfor_aset/buku_inventaris.html" class="kt-menu__link ">
                           <!-- <object type="image/svg+xml" data="assets/media/misc/book.svg" class="kt-menu__link-icon icon icon-speed" width="50%"></object> -->
                           <span class="kt-menu__link-icon icon icon-aset"><i class="fa fa-book"></i></span>
                           <span class="kt-menu__link-text text-center">Buku Inventaris Aset</span>
                        </a>
                     </li>
                     <li class="kt-menu__item  " aria-haspopup="true">
                        <a href="sisfor_aset/manajemen_kendaraan.html" class="kt-menu__link ">
                           <!-- <object type="image/svg+xml" data="assets/media/misc/motorcycle.svg" class="kt-menu__link-icon icon icon-speed" width="50%"></object> -->
                           <span class="kt-menu__link-icon icon icon-aset"><i class="fa fa-car-side"></i></span>
                           <span class="kt-menu__link-text text-center">Manajemen Kendaraan</span>
                        </a>
                     </li>
                     <li class="kt-menu__item  kt-menu__item--active" aria-haspopup="true">
                        <a href="sisfor_aset/lokasi_aset.html" class="kt-menu__link ">
                           <!-- <object type="image/svg+xml" data="assets/media/misc/address.svg" class="kt-menu__link-icon icon icon-speed" width="50%"></object> -->
                           <span class="kt-menu__link-icon icon icon-aset"><i class="fa fa-map-marked-alt"></i></span>
                           <span class="kt-menu__link-text text-center">Lokasi Aset</span>
                        </a>
                     </li>
                  </ul>
               </div>
            </div>
            <!-- end:: Aside Menu -->
         </div>
         <!-- end:: Aside -->
         <div class="kt-grid__item kt-grid__item--fluid kt-grid kt-grid--hor kt-wrapper" id="kt_wrapper">
            <!-- begin:: Header -->
            <div id="kt_header" class="kt-header kt-grid__item  kt-header--fixed ">
               <!-- begin: Header Menu -->
               <button class="kt-header-menu-wrapper-close" id="kt_header_menu_mobile_close_btn"><i
                     class="la la-close"></i></button>
               <div class="kt-header-menu-wrapper" id="kt_header_menu_wrapper">
                  <div id="kt_header_menu" class="kt-header-menu kt-header-menu-mobile  kt-header-menu--layout-tab ">
                     <ul class="kt-menu__nav ">
                        <div class="form-group mt-3">

                        </div>
                     </ul>

                  </div>
               </div>
               <!-- end: Header Menu -->
               <!-- begin:: Header Topbar -->
               <div class="kt-header__topbar pt-3" style="display: block;">
                  <!--begin: User Bar -->
                  <a href="program/login.html" class="btn btn-secondary btn-logout">
                     <i class="fa fa-sign-out-alt"></i> Logout
                  </a>
                  <!--end: User Bar -->
               </div>
               <!-- end:: Header Topbar -->
            </div>
            <!-- end:: Header -->
            <div class="kt-content  kt-grid__item kt-grid__item--fluid kt-grid kt-grid--hor" id="kt_content">
               <!-- begin:: Content Head -->
               <div class="kt-subheader  kt-grid__item" id="kt_subheader">
                  <div class="kt-container  kt-container--fluid ">
                     <div class="kt-subheader__main">
                        <h3 class="kt-subheader__title">Rekap Mutasi</h3>
                        <span class="kt-subheader__separator kt-subheader__separator--v"></span>
                     </div>
                     <div class="kt-subheader__toolbar">
                     </div>
                  </div>
               </div>
               <!-- end:: Content Head -->
               <!-- begin:: Content -->
               <div class="kt-container  kt-container--fluid  kt-grid__item kt-grid__item--fluid">
                  <!--Begin::Dashboard 3-->
                  <!--Begin::Row-->
                  <div class="row mt-1">
                     <div class="col">
                        <div class="kt-portlet kt-portlet--mobile">
                           <div class="kt-portlet__head">
                              <div class="kt-portlet__head-label">
                                 <h3 class="kt-portlet__head-title">
                                    Rekap Mutasi Aset
                                 </h3>
                              </div>
                           </div>
                           <div class="kt-portlet__body" id="tableRekapWrap">
                              <div class="kt-input-icon kt-input-icon--left">
                                 <input type="text" class="form-control" placeholder="Cari..." id="generalSearch">
                                 <span class="kt-input-icon__icon kt-input-icon__icon--left">
                                    <span><i class="la la-search"></i></span>
                                 </span>
                              </div>
                              <table class="table table-bordered" id="tbl_lokasi_aset">
                                 <thead class="">
                                    <tr>
                                       <th colspan="3">Nomor</th>
                                       <th colspan="3">Spesifikasi Barang</th>
                                       <th rowspan="2">Lokasi Barang</th>
                                    </tr>
                                    <tr>
                                       <th>unit</th>
                                       <th>kode barang</th>
                                       <th>register</th>
                                       <th>Nama / Jenis Barang</th>
                                       <th>Merk / Type</th>
                                       <th> No. Sertifikat</th>
                                    </tr>
                                 </thead>
                              </table>
                           </div>
                        </div>
                     </div>
                  </div>
               </div>
               <!-- end:: Content -->
            </div>

            <!-- Modal -->
            <div class="modal fade" data-backdrop="static" id="modal_lokasi" tabindex="-1" role="dialog"
               aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
               <div class="modal-dialog modal-lg modal-dialog-centered" role="document">
                  <div class="modal-content">
                     <div class="modal-header">
                        <h5 class="modal-title" id="exampleModalLongTitle">
                           <i class="fa fa-map-marker-alt mr-1"></i> Lokasi
                        </h5>
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        </button>
                     </div>
                     <div class="modal-body">
                        <form action="">
                           <div class="row">
                              <div class="col">
                                 <div class="form-group">
                                    <label>Alamat Aset</label>
                                    <input id="almatAset" name="almatAset" type="text" class="form-control"
                                       placeholder="input alamat aset" readonly="">
                                 </div>
                                 <div class="form-group">
                                    <label>Latitude</label>
                                    <input id="latitude-point" name="latitude-point" placeholder="_ _ _ _" type="text"
                                       class="form-control" value="" readonly="" readonly="">
                                 </div>
                                 <div class="form-group">
                                    <label>Longitude</label>
                                    <input id="longitude-point" name="longitude-point" placeholder="_ _ _ _" type="text"
                                       class="form-control" value="" readonly="" readonly="">
                                 </div>
                                 <input name="id-aset" id="id-aset" type="hidden">
                              </div>
                              <div class="col">
                                 <div id="googleMap" style="width:100%;height:300px;"></div>
                              </div>
                           </div>
                        </form>
                     </div>
                     <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-dismiss="modal">
                           <i class="fa fa-times"></i> Batal
                        </button>
                        <button type="button" class="btn btn-primary">
                           <i class="fa fa-upload"></i> Update Data
                        </button>
                     </div>
                  </div>
               </div>
            </div>
            <!-- End: Modal -->

            <!-- begin:: Footer -->
            <div class="kt-footer  kt-grid__item kt-grid kt-grid--desktop kt-grid--ver-desktop" id="kt_footer">
               <div class="kt-container  kt-container--fluid ">
                  <div class="kt-footer__copyright">
                     2020&nbsp;&copy;&nbsp;<a href="https://upanastudio.com" target="_blank" class="kt-link">Upana
                        Studio</a>
                  </div>
                  <div class="kt-footer__menu">
                  </div>
               </div>
            </div>
            <!-- end:: Footer -->
         </div>
      </div>
   </div>
   <!-- end:: Page -->

   <!-- end::Quick Panel -->
   <!-- begin::Global Config(global config for global JS sciprts) -->
   <script>
      var KTAppOptions = {
         "colors": {
            "state": {
               "brand": "#2c77f4",
               "light": "#ffffff",
               "dark": "#282a3c",
               "primary": "#5867dd",
               "success": "#34bfa3",
               "info": "#36a3f7",
               "warning": "#ffb822",
               "danger": "#fd3995"
            },
            "base": {
               "label": ["#c5cbe3", "#a1a8c3", "#3d4465", "#3e4466"],
               "shape": ["#f0f3ff", "#d9dffa", "#afb4d4", "#646c9a"]
            }
         }
      };
   </script>
   <!-- end::Global Config -->
   <!--begin::Global Theme Bundle(used by all pages) -->
   <script src="assets/plugins/global/plugins.bundle.js" type="text/javascript"></script>
   <script src="assets/js/scripts.bundle.js" type="text/javascript"></script>
   <script src="assets/js/pages/dashboard.js" type="text/javascript"></script>
   <script src="assets/plugins/custom/datatables/datatables.bundle.js" type="text/javascript"></script>
   <!-- amchartjs -->

   <!-- end: amchartjs -->
   <!-- gmaps -->

   <!-- end: gmaps -->
   <script>

      "use strict";
      var KTDatatablesSearchOptionsAdvancedSearch = function () {
         $.fn.dataTable.Api.register('column().title()', function () {
            return $(this.header()).text().trim();
         });


         var tbl_lokasi_aset = function () {
            var table = $('#tbl_lokasi_aset').DataTable({
               responsive: false,
               scrollX: true,
               dom: `<'row'<'col-sm-12'tr>><'row'<'col-sm-12 col-md-5'i><'col-sm-12 col-md-7 dataTables_pager'lp>>`,
               lengthMenu: [5, 10, 25, 50],
               pageLength: 10,
               language: {
                  'lengthMenu': 'Display _MENU_',
               },
               searchDelay: 500,
               processing: true,
               serverSide: false,
               ajax: {
                  url: 'assets/source/inventaris.json',
                  type: 'POST',
               },
               search: {
                  input: $('#generalSearch'),
               },
               columns: [
                  {
                     data: 'unit',
                     title: 'Unit',
                  }, {
                     data: 'kodeBarang',
                     title: 'Kode Barang',
                  }, {
                     data: 'register',
                     title: 'Register',
                  }, {
                     data: 'namaBarang',
                     title: 'Nama / Jenis Barang',
                  }, {
                     data: 'merk',
                     title: 'Merk / Type',
                  }, {
                     data: 'noSertifikat',
                     title: 'No. Sertifikat',
                  }, {
                     data: 'lokasiBarang',
                     title: 'Lokasi Barang',
                     render: function (data, type, full, meta) {
                        if (data == 'Belum Ditetapkan') {
                           return `<button data-id="${full.idData}" class="btn btn-outline-danger" data-toggle="modal" data-target="#modal_lokasi">${data}</button>`;
                        }
                        return `<button data-id="${full.idData}" class="btn btn-link" data-toggle="modal" data-target="#modal_lokasi">${data}</button>`;
                     }
                  }],
               columnDefs: [{
                  targets: [0, 1, 2, 3, 4, 5, 6],
                  className: 'text-center',
               },
               ],

            });

            $('#generalSearch').on('keyup', function () {
               table.search(this.value).draw();
            });


         };
         return {
            init: function () {
               tbl_lokasi_aset();
            },
         };
      }();

      var modalEdit = function () {
         $("#modal_lokasi").on('shown.bs.modal', function (e) {
            let id = $(e.relatedTarget).data('id');
            $("#id-aset").val(id);
            console.log(id);
         });
      }();

      jQuery(document).ready(function () {
         KTDatatablesSearchOptionsAdvancedSearch.init();
         modalEdit;
      });
   </script>
   <script>
      function myMap() {
         var marker;
         var mapProp = {
            center: new google.maps.LatLng(-5.135399, 119.423790),
            zoom: 14,
         };
         var map = new google.maps.Map(document.getElementById("googleMap"), mapProp);
         marker = new google.maps.Marker({ position: mapProp.center });

         marker.setMap(map);

         google.maps.event.addListener(marker, 'click', function () {
            map.setZoom(16);
            map.setCenter(marker.getPosition());
         });

         google.maps.event.addListener(map, 'click', function (event) {
            placeMarker(map, event.latLng);


         });

         function placeMarker(map, location) {
            if (marker) {
               marker.setPosition(location);
            }
            else {
               marker = new google.maps.Marker({
                  position: location,
                  map: map
               });

            }
            document.getElementById("latitude-point").value = location.lat();
            document.getElementById("longitude-point").value = location.lng();

            var LAT = location.lat();
            var LNG = location.lng();


         }




      }
   </script>

   <script
      src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDH9juhlGHJLtBCZMmO0Q54DwryFcWNs40&callback=myMap"></script>
   <script>
      document
   </script>
</body>
<!-- end::Body -->

</html>